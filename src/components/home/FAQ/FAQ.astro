---
import type { TemplateConfig } from "@utils/configType";
import type { TranslationObject } from "@utils/serverI18n";
import NeonHexagon from "./svgs/neonHexagon.astro";

interface Props {
  config: TemplateConfig;
  translations: TranslationObject;
  currentLang?: string;
}

const { config, translations } = Astro.props as Props;

const {
  home: { faq },
} = config;

if (!faq) {
  return null;
}

const faqs = faq.qa.map((_, i) => {
  const key = `q${i + 1}`;
  const faqData = translations.faq[key as keyof typeof translations.faq] as { question: string; answer: string };
  return {
    question: faqData?.question || "",
    answer: faqData?.answer || "",
  };
});
---

<section
  id={faq.id}
  class="mx-auto mb-12 max-w-screen-lg px-4"
  aria-label="Frequently asked questions"
  data-interactive="faq"
  data-faq-mode="single"
>
  <div class="flex justify-center mb-12">
    <div class="h-2 w-[200px] overflow-hidden rounded-full bg-gradient-to-r from-primary to-secondary md:w-[350px]">
      <span class="block h-full w-full bg-white/20"></span>
    </div>
  </div>
  <div class="flex flex-col md:flex-row gap-6 md:gap-8">
    <!-- Left Column: Title with Hexagon -->
    <div id="faq-hexagon" class="relative flex flex-1 items-center justify-center">
      <NeonHexagon />
      <div class="h-full w-full flex items-center justify-center">
        <h2 class="text-center font-normal text-3xl mb-8 md:mb-0 md:text-4xl">
          {translations.faq.title}
        </h2>
      </div>
    </div>

    <!-- Right Column: FAQ Items -->
    <div class="flex-1 rounded-3xl bg-base-200/50 px-4 py-10 md:px-10">
      {faqs.map((faqItem) => (
        <details data-faq-item class="rounded-2xl border border-base-300 bg-base-100 p-4 mb-4 last:mb-0">
          <summary class="text-lg font-medium text-base-content cursor-pointer list-none">
            {faqItem.question}
          </summary>
          <p class="mt-2 text-base text-base-content/70">
            {faqItem.answer}
          </p>
        </details>
      ))}
    </div>
  </div>
</section>
