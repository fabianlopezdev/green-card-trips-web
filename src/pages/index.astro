---
import BaseLayout from "@layouts/BaseLayout.astro"
import defaultTemplateConfig from "@utils/config"
import { generateFAQPageSchema, generateReviewSchema, generateProductSchema } from "@utils/structuredData"
import Hero from "@components/home/Hero/Hero.astro"
import Highlight from "@components/home/Highlight.astro"
import Features from "@components/home/Features.astro"
import HowItWorks from "@components/home/HowItWorks.astro"
import Pricing from "@components/home/Pricing.astro"
import Faq from "@components/home/FAQ/FAQ.astro"
import enTranslations from "@i18n/locales/en.json"

// Generate FAQPage schema with actual FAQ content from translations
const faqs = [
  { question: enTranslations.faq.q1.question, answer: enTranslations.faq.q1.answer },
  { question: enTranslations.faq.q2.question, answer: enTranslations.faq.q2.answer },
  { question: enTranslations.faq.q3.question, answer: enTranslations.faq.q3.answer },
  { question: enTranslations.faq.q4.question, answer: enTranslations.faq.q4.answer },
  { question: enTranslations.faq.q5.question, answer: enTranslations.faq.q5.answer },
  { question: enTranslations.faq.q6.question, answer: enTranslations.faq.q6.answer },
  { question: enTranslations.faq.q7.question, answer: enTranslations.faq.q7.answer },
  { question: enTranslations.faq.q8.question, answer: enTranslations.faq.q8.answer },
];
const faqSchema = generateFAQPageSchema(faqs);

// Generate Review schemas for testimonials
const reviewSchemas = generateReviewSchema(defaultTemplateConfig);

// Generate Product schema for pricing with production URL
const siteUrl = Astro.site || new URL(Astro.url.origin);
const currentPageUrl = new URL(Astro.url.pathname, siteUrl).href;
const productSchema = generateProductSchema(defaultTemplateConfig, currentPageUrl);
---

<BaseLayout {...defaultTemplateConfig} currentLang="en" translations={enTranslations}>
  <!-- FAQPage Structured Data -->
  <script is:inline type="application/ld+json" set:html={JSON.stringify(faqSchema)} slot="head" />

  <!-- Review Structured Data for Testimonials -->
  {reviewSchemas.map((review) => (
    <script is:inline type="application/ld+json" set:html={JSON.stringify(review)} slot="head" />
  ))}

  <!-- Product Structured Data -->
  <script is:inline type="application/ld+json" set:html={JSON.stringify(productSchema)} slot="head" />

  <Hero config={defaultTemplateConfig} translations={enTranslations} currentLang="en" />
  <Highlight config={defaultTemplateConfig} translations={enTranslations} currentLang="en" />
  <Features config={defaultTemplateConfig} translations={enTranslations} currentLang="en" />
  <HowItWorks config={defaultTemplateConfig} translations={enTranslations} currentLang="en" />
  <Pricing config={defaultTemplateConfig} translations={enTranslations} currentLang="en" />
  <!-- <Testimonials config={defaultTemplateConfig} /> -->
  <Faq config={defaultTemplateConfig} translations={enTranslations} currentLang="en" />
</BaseLayout>
